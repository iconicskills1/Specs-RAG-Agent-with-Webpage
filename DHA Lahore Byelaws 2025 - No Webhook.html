<!DOCTYPE html>

<!-- // Designed by Engr Adnan Aslam (0300 7972999) -->

<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>DHA Lahore ByeLaws - 2025</title>

  <style>
    :root{
      --user-gradient: linear-gradient(135deg,#ff6cab,#7366ff);
      --bot-gradient: linear-gradient(135deg,#00c9ff,#92fe9d);
    }
    body{
      margin:0;height:100vh;display:flex;flex-direction:column;
      background:linear-gradient(135deg,#1e1f29,#111);color:#fff;
      font-family:'Inter',sans-serif;
    }
    header{
      padding:16px;text-align:center;
      background:linear-gradient(90deg,#ff6cab,#7366ff,#00c9ff,#92fe9d);
      background-size:400% 400%;animation:gradientShift 10s ease infinite;
      font-weight:700;font-size:20px;
      box-shadow:0 2px 8px rgba(0,0,0,0.4);
    }
    @keyframes gradientShift{
      0%{background-position:0% 50%}
      50%{background-position:100% 50%}
      100%{background-position:0% 50%}
    }
    .messages{flex:1;overflow:auto;padding:20px;display:flex;flex-direction:column;gap:14px;}
    .message{max-width:75%;padding:12px 16px;border-radius:18px;font-size:15px;line-height:1.4;
      box-shadow:0 4px 12px rgba(0,0,0,0.25);word-wrap:break-word;}
    .user{align-self:flex-end;background:var(--user-gradient);color:#fff;border-bottom-right-radius:6px;}
    .ai{align-self:flex-start;background:var(--bot-gradient);color:#111;border-bottom-left-radius:6px;}
    .meta{font-size:12px;opacity:0.8;margin-bottom:6px;font-weight:600;}
    .input-bar{display:flex;align-items:center;padding:12px;background:#1c1d26;border-top:1px solid rgba(255,255,255,0.1);}
    textarea{flex:1;border:none;border-radius:12px;padding:12px;font-size:14px;resize:none;
      min-height:50px;max-height:160px;outline:none;background:#2a2b38;color:#fff;}
    button{margin-left:12px;border:none;padding:12px 18px;border-radius:12px;
      background:linear-gradient(135deg,#ff6cab,#7366ff);color:#fff;font-weight:600;cursor:pointer;
      box-shadow:0 4px 10px rgba(0,0,0,0.3);transition:transform 0.15s ease;}
    button:active{transform:scale(0.96);}button:disabled{opacity:0.6;cursor:not-allowed;}
    .typing{font-style:italic;opacity:0.8;}
	
	  .msg-body ul {
  margin: 6px 0 6px 18px;
  padding-left: 0;
}
.msg-body li {
  margin-bottom: 4px;
  line-height: 1.45;
}
.msg-body b {
  color: #111;
  font-weight: 600;
}
.msg-body details summary {
  cursor: pointer;
  font-weight: 600;
  color: #0b3b66;
}
.msg-body details div {
  margin-top: 6px;
  color: #333;
  font-size: 14px;
}
  </style>
</head>
<body>
  <header>DHA Lahore ByeLaws  -  2025</header>

  <div id="messages" class="messages" aria-live="polite"><div class="message ai"><div class="meta">DHAL 2025 Bot</div><div>السلام و علیکم!</div></div></div>

  <div class="input-bar">
    <textarea id="input" placeholder="Type a message... Press Enter to send, Shift+Enter for new line"></textarea>
    <button id="sendBtn">Send</button>
  </div>

  <script>
    const WEBHOOK_URL = "Place Your Web Hook Here";

    const messagesEl = document.getElementById('messages');
    const inputEl = document.getElementById('input');
    const sendBtn = document.getElementById('sendBtn');

    function addMessage(text, who='ai'){
      const m = document.createElement('div');
      m.className = 'message ' + who;
      m.innerHTML = `<div class="meta">${who==='user'?'You':'DHAL 2025 Bot'}</div>` +
              `<div class="msg-body">${who === 'ai' ? text : escapeHtml(text).replace(/\n/g,'<br>')}</div>`;
      messagesEl.appendChild(m);
      messagesEl.scrollTop = messagesEl.scrollHeight;
    }

    function escapeHtml(unsafe){
      return String(unsafe)
        .replace(/&/g,"&amp;").replace(/</g,"&lt;")
        .replace(/>/g,"&gt;").replace(/"/g,"&quot;")
        .replace(/'/g,"&#039;");
    }

    async function sendMessage(){
      const text = inputEl.value.trim();
      if(!text) return;
      addMessage(text,'user');
      inputEl.value = '';

      const typing = document.createElement('div');
      typing.className = 'message ai';
      typing.innerHTML = '<div class="meta">DHAL 2025 Bot</div><div class="typing">Typing...</div>';
      messagesEl.appendChild(typing);
      messagesEl.scrollTop = messagesEl.scrollHeight;

      sendBtn.disabled = true;

      try{
        const res = await fetch(WEBHOOK_URL, {
          method:'POST',
          headers:{'Content-Type':'application/json'},
          body:JSON.stringify({ text })
        });
        typing.remove();

        if(!res.ok){
          addMessage("Error: " + res.status,'ai');
          return;
        }
        let reply;
        const ct = res.headers.get('content-type')||'';
        if(ct.includes('json')){
          const j = await res.json();
          reply = j.reply ?? j.message ?? j.text ?? JSON.stringify(j);
        } else {
          reply = await res.text();
        }

		// Convert markdown-style bullets (*) and bold (**) to proper HTML
		reply = reply
		.replace(/\*\*\s*(.*?)\s*\*\*/g, '<b>$1</b>')      // **bold**
		.replace(/^\s*\*\s+/gm, '<li>')                    // * bullet
		.replace(/(<li>.*?)(?=<li>|$)/gs, '<ul>$1</ul>');  // wrap bullets in <ul>

	   addMessage(reply,'ai');
      } catch(err){
        typing.remove();
        addMessage("Network error: " + err.message,'ai');
      } finally{
        sendBtn.disabled = false;
      }
    }

    inputEl.addEventListener('keydown',e=>{
      if(e.key==='Enter' && !e.shiftKey){
        e.preventDefault();
        sendMessage();
      }
    });
    sendBtn.addEventListener('click',sendMessage);

    addMessage("I am DHAL 2025 Bot created by Engr Adnan Aslam, 03007972999.");
	addMessage("I am here to assist you in accordance with DHA Lahore Building ByeLwas - 2025 (Updated - Dated: 29-Jul-2025)");
	addMessage("How can I assist you today ?",'ai');
  </script>


</body></html>